# สรุปการเปลี่ยนแปลงหน้า Duty-433

## การเปลี่ยนแปลงที่ทำไป

### 1. แก้ไขหน้าแสดงรายชื่อทั้งหมด
- **เปลี่ยนคอลัมน์สถิติ**: จาก "สถิติ" เป็น "จำนวนครั้งเข้า433"
- **เปลี่ยนการแสดงข้อมูล**: จาก `p.stat` เป็น `countValid433Entries(p)` (นับเฉพาะรายการที่มีข้อมูลถูกต้อง)
- **เปลี่ยนในหน้า detail**: จาก "สถิติได้รับหน้าที่พิเศษ" เป็น "จำนวนครั้งเข้า433"
- **แก้ไขการนับ**: เพิ่มฟังก์ชัน `countValid433Entries()` เพื่อนับเฉพาะรายการที่มีข้อมูลที่ถูกต้อง (ไม่นับรายการว่าง)

### 2. เพิ่มฟีเจอร์การคลิกในหน้า overview
- **เพิ่ม state**: `selectedOverviewItem` สำหรับเก็บข้อมูลที่คลิก
- **เพิ่มฟังก์ชัน**: 
  - `handleOverviewItemClick()` - จัดการการคลิก
  - `getOverviewItemData()` - คำนวณจำนวนและเปอร์เซนต์
- **แก้ไขข้อความ**: จากข้อความธรรมดาเป็นข้อความที่คลิกได้
- **เพิ่มการแสดงรายละเอียด**: แสดงจำนวนคนและเปอร์เซนต์เมื่อคลิก

### 3. เพิ่มการจัดการ state
- **รีเซ็ตเมื่อเปลี่ยน view**: รีเซ็ต `selectedOverviewItem` เมื่อเปลี่ยนหน้า
- **รีเซ็ตเมื่อคลิกกราฟ**: รีเซ็ต `selectedOverviewItem` เมื่อคลิกกราฟ
- **รีเซ็ตเมื่อคลิก overview**: รีเซ็ต `selectedPie` เมื่อคลิก overview item

### 4. การคำนวณข้อมูล
- **ถวายรายงาน**: นับคนที่มี `reportHistory` ไม่ว่าง
- **เข้า433**: นับคนที่มี `enter433` ที่มีข้อมูลถูกต้อง (ไม่นับรายการว่าง)
- **ธุรการ**: นับคนที่มี `ธุรการ ฝอ.` หรือ `ธุรการ`
- **ไม่เคยเข้า**: นับคนที่ไม่มีประวัติทั้ง 3 ด้าน

### 5. การแสดงผล
- **สีที่แตกต่าง**: แต่ละประเภทมีสีที่แตกต่างกัน
- **เอฟเฟกต์**: มี shadow และ scale เมื่อเลือก
- **การแสดงรายละเอียด**: แสดงจำนวนคนและเปอร์เซนต์ใต้ข้อความ

## ไฟล์ที่แก้ไข
- `components/modules/duty-433.tsx`
- `components/dashboard.tsx` (เพิ่มโมดูล "หน้าที่ 433" กลับเข้าไปในหน้าแดชบอร์ด)

## การทดสอบ
- รัน `npm run dev` เพื่อทดสอบการทำงาน
- เข้าไปที่หน้า duty-433 (เฉพาะ user 'oat')
- ทดสอบการคลิกที่ข้อความในหน้า overview
- ทดสอบการดูรายชื่อทั้งหมดและคอลัมน์จำนวนครั้งเข้า433
